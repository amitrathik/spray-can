<!DOCTYPE html>
<html>
<head>
    <style>
        #image-container {
            position: relative;
        }
        #image-container:hover canvas {
            filter: none;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            filter: blur(10px);
            transition: filter 0.3s;
        }
        img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div id="image-container">
        <canvas id="pixelate-canvas"></canvas>
        <img src="http://i.imgur.com/w1yg6qo.jpg" id="original-image" alt="Image">
    </div>

    <script>
        // Get the image and canvas elements
        const image = document.getElementById("original-image");
        const canvas = document.getElementById("pixelate-canvas");

        // Set up the canvas size
        canvas.width = image.width;
        canvas.height = image.height;

        // Get the 2D rendering context
        const ctx = canvas.getContext("2d");

        // Function to pixelate the image
        function pixelateImage() {
            const pixelSize = 10; // Adjust this value to control the pixelation level

            ctx.drawImage(image, 0, 0, image.width, image.height);

            // Apply pixelation effect
            ctx.imageSmoothingEnabled = false;
            ctx.globalAlpha = 1;
            for (let x = 0; x < canvas.width; x += pixelSize) {
                for (let y = 0; y < canvas.height; y += pixelSize) {
                    const imageData = ctx.getImageData(x, y, pixelSize, pixelSize);
                    ctx.putImageData(imageData, x, y);
                }
            }
        }

        // Ensure the image is fully loaded before pixelating
        window.onload = pixelateImage;

        // Smooth out the area around the cursor on hover
        canvas.addEventListener("mousemove", (event) => {
            const cursorX = event.clientX - canvas.getBoundingClientRect().left;
            const cursorY = event.clientY - canvas.getBoundingClientRect().top;

            ctx.imageSmoothingEnabled = true;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(image, 0, 0, canvas.width, canvas.height);

            const radius = 50; // Adjust this value to control the smoothing area size
            ctx.filter = `blur(${radius}px)`;

            ctx.drawImage(canvas, cursorX - radius, cursorY - radius, canvas.width, canvas.height, cursorX - radius, cursorY - radius, canvas.width, canvas.height);

            ctx.filter = "none";
        });
    </script>
</body>
</html>
